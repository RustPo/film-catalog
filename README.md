# Каталог фильмов

Стек:

- Angular 20

## Запуск

установите зависимости

```bash
npm ci
```

запустите json-server (чтобы получать хоть какие то данные для отображения),
файл `db.json` должен присутсвовать в корне проекта

```bash
npx json-server db.json
```

запустите приложение

```bash
npm run start
```

после успешного запуска приложение станет доступным на [http://localhost:4200](http://localhost:4200)

## Кратко о проекте

Проектом является приложение для просмотра списка и карточек фильмов, с поиском по названию фильма

### Интеренсные подходы

- `zod` - описаны схемы данных из апи, и добавлена валидация на корректность типов получаемых с севрера, с дальнейшей обработкой ошибок если данные не валидны

- `health-check` - реализован сервис для проверки состояния сервера, оповестит пользователя если сервер будет не доступен, и возобновит работу приложения после успешеного ответа от сервера

- `CI/CD` - настроен пайаплайн на запуск автотестов при создании `PR` в `dev` и `main` + запрещено напрямую делать `push` в эти ветки без `PR`

- `UI` - использована `ui` библиотека `ZardUI` для сокращения времени разработки

# 1. Распространение событий в JavaScript (Event Propagation) — описание, фазы и практическое применение

### Что такое и почему важно
Когда в DOM что-то происходит (клик, клавиша, ввод и т.д.), событие «путешествует» по дереву DOM: от корня к целевому элементу и обратно. Понимание фаз позволяет контролировать, кто и когда получит событие, оптимизировать обработку и решать проблемы безопасности и совместимости.

### Фазы
1. **Capturing phase (фаза перехвата)** — событие идёт сверху вниз (от `window` → `document` → корневой элемент → ... → цель). Обычно слушатели по умолчанию не срабатывают в этой фазе, если не передать `{ capture: true }`.
2. **Target phase (фаза цели)** — событие достигает целевого элемента (`event.target`). Сработают слушатели, привязанные к самому целевому элементу.
3. **Bubbling phase (фаза всплытия)** — событие идёт снизу вверх: с целевого элемента к его предкам (parent), до `document` и `window`. Большинство событий стандартно «всплывают».

> Замечания: некоторые события не всплывают (например, `focus`/`blur` не всплывают, но есть `focusin`/`focusout`). В контексте Shadow DOM есть нюансы: `composed` и `composedPath()` влияют на то, видимо ли событие вне shadow root.

### Ключевые API и поведение
- `element.addEventListener(type, handler, { capture: true/false, passive, once })`
- `event.stopPropagation()` — останавливает дальнейшее распространение.
- `event.stopImmediatePropagation()` — предотвращает выполнение других обработчиков на том же элементе.
- `event.preventDefault()` — предотвращает стандартное действие.
- `event.target` vs `event.currentTarget`
- `event.composedPath()`

### Практические применения
- **Event delegation**
- **Intercept/authorization on capture**
- **Избегание конфликтов библиотек**
- **Оптимизация скролла/тачей**
- **Обработка в shadow DOM**

---

# 2. Promise: что это, состояние, другие способы асинхронности, роль Event Loop

### Что такое Promise
`Promise` — объект, представляющий результат асинхронной операции.

### Состояния
- **pending**
- **fulfilled**
- **rejected**

### Пример
```js
const p = new Promise((resolve, reject) => {
  setTimeout(() => resolve("ok"), 1000);
});
p.then(console.log).catch(console.error).finally(() => console.log("done"));
```

### Комбинирование промисов
- `Promise.all`, `Promise.allSettled`, `Promise.race`, `Promise.any`

### Другие способы асинхронности
- callbacks
- async/await
- generators
- observables
- web workers

### Event Loop
- macrotask vs microtask
- промисы = microtasks
- `setTimeout` = macrotask

---

# 3. ООП и его реализация в JS

### Принципы
- Инкапсуляция
- Наследование
- Полиморфизм
- Абстракция

### Реализация в JS
- прототипное наследование
- функции-конструкторы
- ES6 классы
- приватные поля
- duck typing

---

# 4. Обработка URL браузером

### Этапы
1. Ввод URL
2. Проверка кэша
3. Service Worker
4. DNS
5. TCP/TLS
6. HTTP запрос
7. Ответ сервера
8. Парсинг HTML
9. Построение DOM/CSSOM
10. Layout
11. Paint

### Ускорение
- CDN
- HTTP/2,3
- Cache-Control
- Preload/Preconnect
- defer/async
- critical CSS
- lazy loading

### Проблемы безопасности
- SOP
- CORS
- XSS
- CSRF
- Mixed Content
- TLS/HSTS
- SRI
- postMessage
- Service Worker
- COOP/COEP

